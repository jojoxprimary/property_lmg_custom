<odoo>
    <record id="view_rental_order_form_inherit_substate" model="ir.ui.view">
        <field name="name">rental.order.form.substate.custom</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale_renting.rental_order_primary_form_view"/>
        <field name="arch" type="xml">

            <!-- CUSTOMIZED BUTTONS -->
            <xpath expr="//header/*[1]" position="before">
                <!-- Submit for Review Button -->
                <button
                    name="action_send_for_review"
                    string="Submit for Review"
                    type="object"
                    class="btn-primary"
                    confirm="Are you sure you want to send this proposal for review?"
                    invisible="substate_name != 'Proposal'"
                />
                <!-- Send Proposal Button -->
                <button
                    name="action_send_proposal"
                    string="Send Proposal"
                    type="object"
                    class="btn-primary"
                    invisible="substate_name != 'For Review'"
                />
                <!-- Confirm Payment Button -->
                <button
                    name="action_confirm_payment"
                    string="Confirm Payment"
                    type="object"
                    class="btn-primary"
                    invisible="substate_name != 'Signed'"
                />
            </xpath>


            <!-- OVERRIDE DEFAULT BUTTONS  -->
            <!-- Hide Send by Email Button on Proposal and For Review -->
            <xpath expr="//header/button[@name='action_quotation_send']" position="attributes">
                <attribute name="invisible">state == 'draft'</attribute>
            </xpath>
            <!-- action_confirm -->
            <xpath expr="//header/button[@name='action_confirm']" position="attributes">
                <attribute name="invisible">state == 'draft'</attribute>
            </xpath>

            <!-- Payment Attachment Field - to update every succeeding substate-->
            <xpath expr="//sheet/notebook" position="before">
                <group
                    name="payment_attachment_group"
                    string="Payment Details"
                    invisible="not (substate_name in ['Signed', 'Payment Confirmed'])">
                    <field name="payment_attachment" filename="payment_attachment_filename"/>
                </group>
            </xpath>

        </field>
    </record>
</odoo>
